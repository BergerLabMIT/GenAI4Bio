{% assign start_time = page.timeline | first %}
{% capture offset %}{% include minutes.liquid time=start_time %}{% endcapture %}
<div class="schedule">
  <ul class="schedule-timeline" style="min-width: {{ page.schedule | size | times: 120 }}px">
    {% for time in page.timeline %}
    <li class="schedule-time">{{ time }} </li>
    {% endfor %}
  </ul>
  <ul class="schedule-group">
    {% for day in page.schedule %}
    <li class="schedule-day">
      <h2 class="schedule-header no_anchor">{{ day.name }}</h2>
      {% if day.events %}
      <ul class="schedule-events" style="height: {{ page.timeline | size | times: 40 }}px">
      {% for event in day.events %}
        {% capture start %}{% include minutes.liquid time=event.start %}{% endcapture %}
        {% capture end %}{% include minutes.liquid time=event.end %}{% endcapture %}
        {% assign top = start | minus: offset | times: 40 | divided_by: 30 %}
        {% assign height = end | minus: start | times: 40 | divided_by: 30 %}
        <li class="schedule-event {% if event.class %}{{ event.class }}{% else %}{{ event.name | slugify }}{% endif %}"
            style="top: {{ top }}px; height: {{ height }}px;">
          <div class="name">{{ event.name }}</div>
          <div class="time">{{ event.start }}â€“{{ event.end }}</div>
          {% if event.location_url %}
          <div class="location">
            <span class="location-label">Location:</span>
            <a href="{{ event.location_url }}" target="_blank" rel="noopener">
              {{ event.location_label | default: event.location_url }}
            </a>
          </div>
          {% elsif event.location and event.location contains '](' %}
          {% assign location_label = event.location | split: '](' | first | remove: '[' %}
          {% assign location_url = event.location | split: '](' | last | remove: ')' %}
          <div class="location">
            <span class="location-label">Location:</span>
            <a href="{{ location_url }}" target="_blank" rel="noopener">{{ location_label }}</a>
          </div>
          {% elsif event.location and event.location contains 'http://' %}
          <div class="location">
            <span class="location-label">Location:</span>
            <a href="{{ event.location }}" target="_blank" rel="noopener">{{ event.location }}</a>
          </div>
          {% elsif event.location and event.location contains 'https://' %}
          <div class="location">
            <span class="location-label">Location:</span>
            <a href="{{ event.location }}" target="_blank" rel="noopener">{{ event.location }}</a>
          </div>
          {% elsif event.location %}
          <div class="location">
            <span class="location-label">Location:</span>
            {{ event.location }}
          </div>
          {% endif %}
        </li>
      {% endfor %}
      </ul>
      {% endif %}
    </li>
    {% endfor %}
  </ul>
</div>
